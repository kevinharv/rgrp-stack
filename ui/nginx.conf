server {
    listen 443 ssl http2;            # Enable HTTP/2 for fallback
    listen 443 quic reuseport;       # Enable HTTP/3
    ssl_protocols TLSv1.3;           # HTTP/3 requires TLS 1.3
    ssl_prefer_server_ciphers on;
    
    # SSL certificate and key paths
    ssl_certificate /etc/nginx/ssl/cert.pem;
    ssl_certificate_key /etc/nginx/ssl/key.pem;

    # HTTP/3 settings
    add_header Alt-Svc 'h3-23=":443"'; # Advertise HTTP/3 support

    # Static content root
    root /var/www/html;
    index index.html;

    # Enable server-push for specific resources
    location = /index.html {
        # HTTP/2 server push
        http2_push /style.css;
        http2_push /script.js;
        http2_push /images/logo.png;
    }

    location / {
        try_files $uri $uri/ =404;
    }

    # MIME types for efficient static content handling
    types {
        text/html html;
        text/css css;
        application/javascript js;
        image/png png;
        image/jpeg jpg;
        image/gif gif;
        font/woff woff;
        font/woff2 woff2;
    }

    # Additional caching headers for static files
    location ~* \.(?:css|js|png|jpg|jpeg|gif|ico|woff2?)$ {
        expires 30d;
        add_header Cache-Control "public";
    }

    # Logging (optional, adjust paths as needed)
    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;
}
